local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

local Window = Library.CreateLib("Exploits", "DarkTheme")

local PlayerTab = Window:NewTab("Player")

local VehicleTab = Window:NewTab("Vehicle")

local CombatTab = Window:NewTab("Combat")

local RobberyTab = Window:NewTab("Robberies")

local MainPlayerSection = PlayerTab:NewSection("Main")

local InfiniteJumpEnabled

MainPlayerSection:NewToggle("Infinite Jump", "", function(state)
    InfiniteJumpEnabled = state
end)

local Player = game:GetService("Players").LocalPlayer

game:GetService("UserInputService").InputBegan:connect(function(input)
    if input.KeyCode == Enum.KeyCode.Space then
        Humanoid = game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if InfiniteJumpEnabled then
            Humanoid:ChangeState("Jumping")
            wait(0.1)
            Humanoid:ChangeState("Seated")
        end
     end
end)

local SpeedValue = 140

MainPlayerSection:NewSlider("Speed Value", "16 - 140", 140, 16, function(s)
    SpeedValue = s
end)

local speedy = false

MainPlayerSection:NewKeybind("Speed Toggle Button", "", Enum.KeyCode.LeftShift, function()
    speedy = not speedy
end)

local Player = game:service'Players'.LocalPlayer

game:GetService("UserInputService").InputEnded:connect(function(input)
    if speedy then
        getgenv().WalkSpeedValue = SpeedValue;
        Player.Character.Humanoid:GetPropertyChangedSignal'WalkSpeed':Connect(function()
        Player.Character.Humanoid.WalkSpeed = getgenv().WalkSpeedValue;
        end)
        Player.Character.Humanoid.WalkSpeed = getgenv().WalkSpeedValue;
    end

    if not speedy then
        getgenv().WalkSpeedValue = 16;
        Player.Character.Humanoid:GetPropertyChangedSignal'WalkSpeed':Connect(function()
        Player.Character.Humanoid.WalkSpeed = getgenv().WalkSpeedValue;
        end)
        Player.Character.Humanoid.WalkSpeed = getgenv().WalkSpeedValue;
    end
end)



MainPlayerSection:NewToggle("No E Wait Time", "", function(state)
    if state then
        local UI = require(game:GetService("ReplicatedStorage").Module:WaitForChild("UI"));
        while wait() do
        for i,v in pairs (UI.CircleAction.Specs) do
        v.Duration = 0;
        v.Timed = true;
        end
        end
    else

    end
end)

MainPlayerSection:NewToggle("Auto Keycard", "", function(state)
    if state then
        local plrUtils = game:GetService("ReplicatedStorage").Game.PlayerUtils
        local oldHasKey = require(plrUtils).hasKey
        require(plrUtils).hasKey = function() 
            return true
        end


        local Camera = workspace.CurrentCamera
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local UserInputService = game:GetService("UserInputService")
        local TweenService = game:GetService("TweenService")
        local LocalPlayer = Players.LocalPlayer
        local Holding = false
    else
        
    end
end)

local MainVehicleSection = VehicleTab:NewSection("Main")

MainVehicleSection:NewToggle("Vehicle Speed", "", function(state)
    if state then
        dir = 0
        gs = game.GetService
        gs(game,"RunService").Heartbeat:connect(function()
        for i,v in next,workspace.Vehicles:children() do
            if v.Name ~= "Heli" then
                if v:FindFirstChild("Engine") then
                    local bf,cf = v.Engine:FindFirstChild("NewForce"),v:GetPrimaryPartCFrame().lookVector
                    if not bf then
                        bf = v.Engine:FindFirstChild("BodyForce") or v.Engine:FindFirstChild("VectorForce")
                        if bf then
                            bf = bf:Clone()
                            bf.Parent = v.Engine
                            bf.Name = "NewForce"
                        end
                    end
                    if bf then
                        local fa = 1
                        if v.Name:lower():find("bike") then fa = .3 elseif v.Name:lower():find("bugg") then fa = .5 end
                        if v.Seat.PlayerName.Value ~= game:GetService("Players").LocalPlayer.Name then fa = 0 end
                        bf.Force = Vector3.new(cf.X*300000*dir*fa,0,cf.Z*300000*dir*fa)
                    end
                end
            end
        end
        end)
        val = {
        {Enum.KeyCode.W,1};
        {Enum.KeyCode.S,-1};
        }
        uis = gs(game,"UserInputService")
        chk = function(k)
        for i,v in next,val do
            if v[1]==k.KeyCode then
                return v[2]
            end
        end
        end
        uis.InputBegan:connect(function(k)
        dir = chk(k) or dir
        end)
        uis.InputEnded:connect(function(k)
        if chk(k) == dir then
            dir = 0
        end
        end)
    else
    
    end
end)

local flying = false

MainVehicleSection:NewKeybind("Vehicle Fly Keybind", "KeybindInfo", Enum.KeyCode.LeftAlt, function()
	flying = not flying
    if flying then
        lplr.Character.Humanoid.CameraOffset = Vector3.new(2,0,0)
    else
        lplr.Character.Humanoid.CameraOffset = Vector3.new(0,0,0)
    end
end)

local VehicleFlySpeedValue = 300
local flyspeed = VehicleFlySpeedValue

MainVehicleSection:NewSlider("Vehicle Fly Speed", "50 - 350", 350, 50, function(s)
    VehicleFlySpeedValue = s
    flyspeed = VehicleFlySpeedValue
end)


local maxdistance = 100000000000000 --using math.huge makes this script wonky
local uiservice = game.UserInputService
local lplr = game.Players.LocalPlayer
local mouse = lplr:GetMouse()
local function GetVelocity(pos1,pos2,StudsPerSecond)
local distance = (pos2 - pos1)
local mag = distance.Magnitude
return (distance/mag)*StudsPerSecond
end
local function getkey(keycode)
local key = tostring(keycode):lower()
local findcode, a = key:find("keycode.")
return key:sub(a+1)
end
local keys = {}
game.RunService.Heartbeat:connect(function()
pcall(function()
local hrp
for i,v in pairs(workspace.Vehicles:GetChildren()) do
    if pcall(function() return v.Engine and v.Seat.PlayerName end) then
        if v.Seat.PlayerName.Value == lplr.Name then
            hrp = v.Engine
            break
       else
           hrp = nil
        end
    end
end
if not hrp then
flying = false
    lplr.Character.Humanoid.CameraOffset = Vector3.new(0,0,0)
end
    if flying then
    local cam = workspace.Camera
    end
local frontoffset = CFrame.new() + Vector3.new(0,0,-maxdistance)
local backoffset = CFrame.new() + Vector3.new(0,0,maxdistance)
local leftoffset = CFrame.new() + Vector3.new(-maxdistance,0,0)
local rightoffset = CFrame.new() + Vector3.new(maxdistance,0,0)
local velocity = Vector3.new()
    if flying then
    if keys.w_active then
        velocity = velocity + GetVelocity(hrp.Position,(hrp.CFrame*frontoffset).Position,flyspeed)
    end
    if keys.s_active then
        velocity = velocity + GetVelocity(hrp.Position,(hrp.CFrame*backoffset).Position,flyspeed)
    end
    if keys.a_active then
        velocity = velocity + GetVelocity(hrp.Position,(hrp.CFrame*leftoffset).Position,flyspeed)
    end
    if keys.d_active then
        velocity = velocity + GetVelocity(hrp.Position,(hrp.CFrame*rightoffset).Position,flyspeed)
    end
    hrp.Velocity = velocity
     hrp.CFrame = CFrame.new(hrp.Position, (workspace.Camera.CFrame*frontoffset).Position)
    end
    if flying and not keys.w_active and not keys.a_active and not keys.s_active and not keys.d_active then
        hrp.Velocity = Vector3.new(0,1.005,0)
    end
end)
end)
uiservice.InputBegan:connect(function(key,processed)
if processed then return end
    keys[getkey(key.KeyCode).."_active"] = true
end)
uiservice.InputEnded:connect(function(key)
    keys[getkey(key.KeyCode).."_active"] = false
end)


local MainCombatSection = CombatTab:NewSection("Main")

MainCombatSection:NewToggle("ESP", "", function(state)
    if state then
        local Esp = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/x114/RobloxScripts/main/OpenSourceEsp"))()

        Esp.Box = false
        Esp.BoxColor = Color3.fromRGB(255,255,255)
        Esp.BoxOutline = false
        Esp.BoxOutlineColor = Color3.fromRGB(0,0,0)

        Esp.HealthBar = false
        Esp.HealthBarSide = "Left"

        Esp.Names = true
        Esp.NamesColor = Color3.fromRGB(255,255,255)
        Esp.NamesOutline = true
        Esp.NamesFont = 2
        Esp.NamesSize = 15
    else
        
    end
end)

MainCombatSection:NewToggle("Silent Aim And Wallbang", "", function(state)
    if state then
        getgenv().toggled = true

        getgenv().old = getgenv().old or require(game:GetService("ReplicatedStorage").Module.RayCast).RayIgnoreNonCollideWithIgnoreList

        if getgenv().toggled then
            require(game:GetService("ReplicatedStorage").Module.RayCast).RayIgnoreNonCollideWithIgnoreList = function(...)
                local nearestDistance, nearestEnemy = 600, nil
                for i,v in pairs(game:GetService("Players"):GetPlayers()) do
                    if v.Team ~= game:GetService("Players").LocalPlayer.Team and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                        if (v.Character.HumanoidRootPart.Position - game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position).Magnitude < nearestDistance then
                            nearestDistance, nearestEnemy = (v.Character.HumanoidRootPart.Position - game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position).Magnitude, v
                        end
                    end
                end
                local arg = {old(...)}
                if (tostring(getfenv(2).script) == "BulletEmitter" or tostring(getfenv(2).script) == "Taser") and nearestEnemy then
                    arg[1] = nearestEnemy.Character.HumanoidRootPart
                    arg[2] = nearestEnemy.Character.HumanoidRootPart.Position
                end
                return unpack(arg)
            end
        else
            require(game:GetService("ReplicatedStorage").Module.RayCast).RayIgnoreNonCollideWithIgnoreList = getgenv().old
        end
    else
        
    end
end)

local MainRobberySection = RobberyTab:NewSection("Main")

MainRobberySection:NewToggle("Remove Bank Lasers", "", function(state)
    if state then

        for k, v in pairs(game.Workspace.Banks:GetDescendants()) do
            if v.Name == "FrontDoor" then
                v:Destroy()
            end
            if v.Name == "InsideDoor" then
                v:Destroy()
            end
            if v.Name == "SideDoor" then
                v:Destroy()
            end
            if v.Name == "Lasers" then
                v:Destroy()
            end
        end
    else

    end
end)

local JewelryClear

local floors

for k, v in pairs(game.Workspace.Jewelrys:GetDescendants()) do
    if v.Name == "Floors" then
        floors = v
    end
end

MainRobberySection:NewToggle("Remove Jewelery Lasers", "", function(state)
    if state then

        for k, v in pairs(game.Workspace.Jewelrys:GetDescendants()) do
            if v.Name == "TopDoor" then
                v:Destroy()
            end
            if v.Name == "Lasers" then
                v:Destroy()
            end
            if v.Name == "BarbedWire" then
                v:Destroy()
            end
            if v.Name == "Cameras" then
                v:Destroy()
            end
            if v.Name == "LaserFloor" then
                v:Destroy()
            end
        end
        local floor = floors:GetChildren()[1]

        for k, v in pairs(floor:GetChildren()) do
            if v.Name == "Part" then
                v:Destroy()
            end
        end
    end
end)

MainRobberySection:NewToggle("Remove Casino Lasers", "", function(state)
    if state then

        for k, v in pairs(game.Workspace.Casino:GetDescendants()) do
            if v.Name == "Lasers" then
                v:Destroy()
            end
            if v.Name == "LaserCarousel" then
                v:Destroy()
            end
            if v.Name == "LasersMoving" then
                v:Destroy()
            end
            if v.Name == "CamerasMoving" then
                v:Destroy()
            end
        end
    else

    end
end)

MainRobberySection:NewToggle("Remove Cell Doors", "", function(state)
    if state then
        for k, v in pairs(game.Workspace:GetDescendants()) do
            if v.Name == "Door" then
                if v.Parent.Name == "Cell" then
                    v:Destroy()
                end
            end
        end
    end
end)

MainRobberySection:NewToggle("Remove Doors", "", function(state)
    if state then
        for k, v in pairs(game.Workspace:GetDescendants()) do
            if v.Name == "SwingDoor" then
                v:Destroy()
            end
        end
    end
end)
